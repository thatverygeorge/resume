---
import '@/styles/global.css';
import '@/styles/theme-light.css';
import '@/styles/theme-dark.css';

import about from '@/data/about.json';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href=`${import.meta.env.BASE_URL}/favicon.svg` />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={about.description} />
    <title>{`${about.name} â€” ${about.position} (${about.techStack.join(', ')})`}</title>
  </head>

  <body>
    <slot />
  </body>
</html>

<script is:inline>
  const Classes = {
    THEME: {
      LIGHT: 'theme-light',
      DARK: 'theme-dark',
    },
  };

  const Themes = {
    LIGHT: 'light',
    DARK: 'dark',
  };

  const theme = localStorage.getItem('theme') ?? '';
  const root = document.querySelector(':root');
  const checkbox = document.querySelector('.theme-switcher__checkbox');

  switch (theme) {
    case Themes.LIGHT:
      root.classList.add(Classes.THEME.LIGHT);
      break;
    case Themes.DARK:
      root.classList.add(Classes.THEME.DARK);
      checkbox.checked = true;
      break;
    default:
      checkbox.checked = window.matchMedia('(prefers-color-scheme: dark)').matches;
      break;
  }
</script>

<script>
  const font = new FontFace(
    'MartianMono',
    `url(${import.meta.env.BASE_URL}/font/MartianMonoVF.woff2)`,
    {
      weight: '100 800',
      stretch: '75% 112.5%',
      display: 'swap',
    }
  );

  document.fonts.add(font);
</script>
